<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Крипто Кошелек</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --bg-dark: #121212;
            --bg-card: rgba(255, 255, 255, 0.05);
            --text-primary: #ffffff;
            --text-secondary: rgba(255, 255, 255, 0.7);
            --accent-color: #2196f3;
            --hover-color: #1976d2;
            --card-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.37);
        }

        body {
            margin: 0;
            padding: 0;
            font-family: 'Roboto', sans-serif;
            background: var(--bg-dark);
            color: var(--text-primary);
            min-height: 100vh;
        }

        .nav {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(18, 18, 18, 0.8);
            backdrop-filter: blur(20px);
            z-index: 1000;
            padding: 0.8rem 0;
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 3rem;
        }

        .logo {
            color: var(--text-primary);
            text-decoration: none;
            font-size: 1.5rem;
            font-weight: 600;
            letter-spacing: -0.5px;
            position: relative;
            transition: all 0.3s ease;
        }

        .logo:hover {
            color: var(--accent-color);
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            align-items: center;
        }

        .nav-link {
            color: var(--text-secondary);
            text-decoration: none;
            font-weight: 500;
            font-size: 0.95rem;
            padding: 0.5rem 0.8rem;
            border-radius: 6px;
            transition: all 0.2s ease;
            position: relative;
        }

        .nav-link:hover {
            color: var(--text-primary);
            background: rgba(255, 255, 255, 0.05);
        }

        .nav-link.active {
            color: var(--accent-color);
            background: rgba(33, 150, 243, 0.1);
        }

        .container {
            max-width: 1200px;
            margin: 80px auto 0;
            padding: 2rem;
        }

        .crypto-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .card {
            background: var(--bg-card);
            padding: 2rem;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            box-shadow: var(--card-shadow);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .wallet-section {
            background: var(--bg-card);
            padding: 2rem;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            box-shadow: var(--card-shadow);
            margin-bottom: 3rem;
        }

        .charts-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(450px, 1fr));
            gap: 2rem;
            margin-top: 1rem;
        }

        .chart-container {
            background: var(--bg-card);
            padding: 1.5rem 2rem 2rem;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            box-shadow: var(--card-shadow);
            height: 300px;
            position: relative;
            overflow: hidden;
        }

        .section {
            display: none;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .section.active {
            display: block;
            opacity: 1;
        }

        .about-section,
        .features-section {
            background: var(--bg-card);
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 2rem;
            backdrop-filter: blur(10px);
            box-shadow: var(--card-shadow);
        }

        .about-section h2 {
            color: var(--accent-color);
            margin-bottom: 1.5rem;
        }

        .about-section p {
            line-height: 1.6;
            color: var(--text-secondary);
            margin-bottom: 1rem;
        }

        .about-section ul {
            list-style-type: none;
            padding: 0;
        }

        .about-section li {
            margin: 0.5rem 0;
            padding-left: 1.5rem;
            position: relative;
            color: var(--text-secondary);
        }

        .about-section li::before {
            content: "•";
            color: var(--accent-color);
            position: absolute;
            left: 0;
        }

        .features-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
        }

        .feature-card {
            background: rgba(255, 255, 255, 0.03);
            padding: 1.5rem;
            border-radius: 10px;
            transition: transform 0.3s ease;
        }

        .feature-card:hover {
            transform: translateY(-5px);
        }

        .feature-card h3 {
            color: var(--accent-color);
            margin-bottom: 1rem;
        }

        .feature-card p {
            color: var(--text-secondary);
            line-height: 1.5;
        }

        .transfer-card {
            background: var(--bg-card);
            padding: 2.5rem;
            border-radius: 20px;
            backdrop-filter: blur(20px);
            box-shadow: var(--card-shadow);
            max-width: 500px;
            margin: 0 auto;
        }

        .transfer-card h1 {
            margin: 0 0 2rem;
            font-size: 2rem;
            color: var(--accent-color);
            text-align: center;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-group label {
            display: block;
            margin-bottom: 0.8rem;
            color: var(--text-secondary);
            font-size: 1.1rem;
            font-weight: 500;
        }

        .form-group select,
        .form-group input {
            width: 100%;
            padding: 1rem;
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            background: rgba(18, 18, 18, 0.8);
            color: var(--text-primary);
            font-size: 1.1rem;
            transition: all 0.3s ease;
        }

        .form-group select:hover,
        .form-group input:hover {
            border-color: var(--accent-color);
            background: rgba(33, 150, 243, 0.1);
        }

        .form-group select:focus,
        .form-group input:focus {
            outline: none;
            border-color: var(--accent-color);
            background: rgba(33, 150, 243, 0.15);
            box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.2);
        }

        .balance-display {
            margin-top: 0.8rem;
            color: var(--accent-color);
            font-size: 1.1rem;
            font-weight: 500;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .balance-display.visible {
            opacity: 1;
        }

        .button-group {
            display: flex;
            gap: 1.5rem;
            margin-top: 2.5rem;
        }

        .button-group button {
            flex: 1;
            padding: 1rem;
            font-size: 1.1rem;
            font-weight: 500;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .transfer-btn {
            background: var(--accent-color);
            color: white;
            border: none;
        }

        .transfer-btn:hover {
            background: var(--hover-color);
            transform: translateY(-2px);
        }

        .cancel-btn {
            background: rgba(255, 255, 255, 0.1);
            color: var(--text-primary);
            border: none;
        }

        .cancel-btn:hover {
            background: rgba(255, 255, 255, 0.15);
        }

        .balance-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 1rem;
            gap: 1rem;
        }

        .balance {
            color: var(--text-secondary);
            font-size: 1rem;
        }

        .transfer-btn {
            background: var(--accent-color);
            color: white;
            text-decoration: none;
            padding: 0.6rem 1.2rem;
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: 500;
            transition: all 0.2s ease;
            white-space: nowrap;
            border: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .transfer-btn::after {
            content: '→';
            font-size: 1.1rem;
            transition: transform 0.2s ease;
        }

        .transfer-btn:hover {
            background: var(--hover-color);
            transform: translateY(-2px);
        }

        .transfer-btn:hover::after {
            transform: translateX(3px);
        }

        .price {
            font-size: 1.8rem;
            font-weight: 600;
            color: var(--text-primary);
            margin: 0.8rem 0;
            text-shadow: 0 0 10px rgba(33, 150, 243, 0.2);
        }

        .price-change {
            font-size: 1rem;
            margin-bottom: 1rem;
        }

        .card h2 {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--text-secondary);
            margin: 0;
        }

        /* Медиа-запросы для адаптивности */
        @media (max-width: 768px) {
            .nav-container {
                flex-direction: column;
                gap: 1rem;
            }

            .nav-links {
                flex-wrap: wrap;
                justify-content: center;
                gap: 1rem;
            }

            .container {
                padding: 1rem;
            }

            .features-section {
                grid-template-columns: 1fr;
            }
        }

        /* Стили для кошельков */
        .wallet-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 2rem;
            justify-items: center;
        }

        .wallet-card {
            background: var(--bg-card);
            padding: 2rem;
            border-radius: 15px;
            text-align: center;
            transition: all 0.3s ease;
            width: 100%;
            max-width: 250px;
        }

        .wallet-card:hover {
            transform: translateY(-5px);
        }

        .wallet-card img {
            width: 50px;
            height: 50px;
            margin-bottom: 1rem;
            filter: drop-shadow(0 0 5px rgba(33, 150, 243, 0.3));
        }

        .wallet-card p {
            margin: 0.5rem 0;
            font-weight: bold;
            font-size: 1.1rem;
            color: var(--text-primary);
        }

        .wallet-card .balance {
            color: var(--accent-color);
            font-size: 1.2rem;
            margin: 1rem 0;
        }

        .connect-btn {
            background: var(--accent-color);
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 8px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-top: 1rem;
        }

        .connect-btn:hover {
            background: var(--hover-color);
            transform: translateY(-2px);
        }

        /* Медиа-запросы для адаптивности */
        @media (max-width: 768px) {
            .charts-grid {
                grid-template-columns: 1fr;
            }

            .chart-container {
                height: 250px;
            }

            .wallet-card {
                max-width: none;
            }
        }

        .charts-section {
            background: var(--bg-card);
            padding: 2rem;
            border-radius: 15px;
            backdrop-filter: blur(10px);
            box-shadow: var(--card-shadow);
        }

        .charts-section h2 {
            color: var(--accent-color);
            text-align: center;
            margin-bottom: 0.5rem;
            font-size: 2rem;
        }

        .charts-description {
            text-align: center;
            color: var(--text-secondary);
            margin-bottom: 2rem;
            font-size: 1.1rem;
        }

        .form-group select {
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%232196f3' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 1rem center;
            background-size: 1.2em;
            padding-right: 3rem;
        }

        .form-group select option {
            background: #1a1a1a;
            color: var(--text-primary);
            padding: 1rem;
        }

        .form-group select:focus {
            border-color: var(--accent-color);
            box-shadow: 0 0 0 3px rgba(33, 150, 243, 0.2);
        }
    </style>
</head>
<body>
    <nav class="nav">
        <div class="nav-container">
            <a href="#" class="logo">CryptoHandler</a>
            <div class="nav-links">
                <a href="#main" class="nav-link active" data-section="main">Главная</a>
                <a href="#charts" class="nav-link" data-section="charts">Графики</a>
                <a href="#transfer" class="nav-link" data-section="transfer">Перевод</a>
                <a href="#about" class="nav-link" data-section="about">О нас</a>
            </div>
        </div>
    </nav>

    <div class="container">
        <section id="main" class="section active">
            <div class="wallet-section">
                <h2>CryptoHandler</h2>
                <p style="text-align: center; margin-bottom: 20px; font-size: 1.2em;">Здесь хранятся валюты от всех подключенных вами кошельков</p>
                
                <div class="wallet-grid">
                    <div class="wallet-card">
                        <img src="https://atomicwallet.io/images/logo.svg" alt="Atomic">
                        <p>Atomic Wallet</p>
                        <button class="connect-btn">Подключить</button>
                    </div>
                    
                    <div class="wallet-card">
                        <img src="https://tonkeeper.com/favicon.ico" alt="TonKeeper">
                        <p>TonKeeper</p>
                        <small>Подключен</small>
                    </div>
                    
                    <div class="wallet-card">
                        <img src="https://metamask.io/favicon.ico" alt="MetaMask">
                        <p>MetaMask</p>
                        <small>Подключен</small>
                    </div>
                </div>
            </div>

            <div class="crypto-cards">
                <div class="card">
                    <h2>Bitcoin (BTC)</h2>
                    <div id="btc-price" class="price">Загрузка...</div>
                    <p id="btc-change" class="price-change">Изменение за 24ч: ...</p>
                    <div class="balance-info">
                        <div class="balance" id="btc-balance">Баланс: 0.00000000 BTC</div>
                        <button class="transfer-btn" onclick="document.querySelector('[data-section=transfer]').click()">Перевести</button>
                    </div>
                </div>
                <div class="card">
                    <h2>Ethereum (ETH)</h2>
                    <div id="eth-price" class="price">Загрузка...</div>
                    <p id="eth-change" class="price-change">Изменение за 24ч: ...</p>
                    <div class="balance-info">
                        <div class="balance" id="eth-balance">Баланс: 0.00000000 ETH</div>
                        <button class="transfer-btn" onclick="document.querySelector('[data-section=transfer]').click()">Перевести</button>
                    </div>
                </div>
            </div>
        </section>

        <section id="charts" class="section">
            <div class="charts-section">
                <h2>Анализ рынка</h2>
                <p class="charts-description">Графики изменения цен за последние 24 часа</p>
                <div class="charts-grid">
                    <div class="chart-container">
                        <h3>Bitcoin (BTC)</h3>
                        <canvas id="btcChart"></canvas>
                    </div>

                    <div class="chart-container">
                        <h3>Ethereum (ETH)</h3>
                        <canvas id="ethChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <section id="transfer" class="section">
            <div class="transfer-card">
                <h1>Перевод криптовалюты</h1>
                
                <form id="transfer-form">
                    <div class="form-group">
                        <label>Кошелек отправителя</label>
                        <select id="source-wallet" required>
                            <option value="metamask">MetaMask</option>
                            <option value="tonkeeper">TonKeeper</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label>Криптовалюта</label>
                        <select id="crypto-select" required>
                            <option value="btc">Bitcoin (BTC)</option>
                            <option value="eth">Ethereum (ETH)</option>
                        </select>
                        <div id="balance-display" class="balance-display">Доступный баланс: 0.00000000</div>
                    </div>

                    <div class="form-group">
                        <label>Сумма перевода</label>
                        <input type="number" id="amount" step="0.00000001" min="0" required placeholder="0.00000000">
                    </div>

                    <div class="button-group">
                        <button type="button" class="cancel-btn" onclick="document.querySelector('[data-section=main]').click()">Отмена</button>
                        <button type="submit" class="transfer-btn">Перевести</button>
                    </div>
                </form>
            </div>
        </section>

        <section id="about" class="section">
            <div class="about-section">
                <h2>О CryptoHandler</h2>
                <p>CryptoHandler - это современная платформа для управления криптовалютными активами, которая объединяет все ваши криптокошельки в одном месте. Мы предоставляем простой и безопасный способ отслеживания, управления и перевода ваших криптовалют.</p>
                <p>Наша миссия - сделать работу с криптовалютами доступной и понятной для каждого, обеспечивая при этом максимальную безопасность ваших средств.</p>
                <p>Основные преимущества платформы:</p>
                <ul>
                    <li>Поддержка множества популярных криптовалютных кошельков</li>
                    <li>Реальные данные о ценах в режиме реального времени</li>
                    <li>Удобный интерфейс для переводов между кошельками</li>
                    <li>Детальная аналитика и графики изменения цен</li>
                    <li>Максимальная безопасность ваших средств</li>
                </ul>
            </div>
        </section>

        <section id="features" class="section">
            <div class="features-section">
                <div class="feature-card">
                    <h3>Мультивалютность</h3>
                    <p>Поддержка различных криптовалют и возможность легкого переключения между ними.</p>
                </div>
                <div class="feature-card">
                    <h3>Безопасность</h3>
                    <p>Современные методы шифрования и защиты ваших средств.</p>
                </div>
                <div class="feature-card">
                    <h3>Аналитика</h3>
                    <p>Детальные графики и анализ изменения цен в реальном времени.</p>
                </div>
            </div>
        </section>
    </div>

    <script>
        let btcChart, ethChart;

        // Конфигурация графиков
        function getChartConfig(color) {
            return {
                type: 'line',
                data: {
                    labels: [],
                    datasets: [{
                        data: [],
                        borderColor: color,
                        borderWidth: 2,
                        pointBackgroundColor: color,
                        pointRadius: 2,
                        pointHoverRadius: 8,
                        fill: true,
                        backgroundColor: (context) => {
                            const ctx = context.chart.ctx;
                            const gradient = ctx.createLinearGradient(0, 0, 0, 300);
                            gradient.addColorStop(0, `${color}33`);
                            gradient.addColorStop(1, `${color}05`);
                            return gradient;
                        },
                        tension: 0.35,
                        borderJoinStyle: 'round'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    animation: {
                        duration: 2000,
                        easing: 'easeInOutQuart'
                    },
                    plugins: {
                        legend: { display: false },
                        tooltip: {
                            mode: 'index',
                            intersect: false,
                            backgroundColor: 'rgba(0, 0, 0, 0.8)',
                            titleColor: '#fff',
                            bodyColor: '#fff',
                            titleFont: { size: 14, weight: 'bold' },
                            bodyFont: { size: 13 },
                            padding: 12,
                            displayColors: false,
                            callbacks: {
                                label: (context) => `$${context.parsed.y.toLocaleString(undefined, {
                                    minimumFractionDigits: 2,
                                    maximumFractionDigits: 2
                                })}`
                            }
                        }
                    },
                    scales: {
                        x: {
                            display: true,
                            grid: {
                                display: false
                            },
                            ticks: {
                                color: 'rgba(255, 255, 255, 0.5)',
                                maxRotation: 0,
                                autoSkip: true,
                                maxTicksLimit: 8,
                                font: {
                                    size: 11
                                }
                            }
                        },
                        y: {
                            display: true,
                            position: 'right',
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)',
                                drawBorder: false
                            },
                            ticks: {
                                color: 'rgba(255, 255, 255, 0.7)',
                                padding: 8,
                                callback: (value) => `$${value.toLocaleString(undefined, {
                                    minimumFractionDigits: 0,
                                    maximumFractionDigits: 0
                                })}`
                            }
                        }
                    },
                    interaction: {
                        intersect: false,
                        mode: 'index'
                    }
                }
            };
        }

        // Получение исторических данных
        async function getHistoricalData(symbol) {
            try {
                const response = await fetch(`https://api.binance.com/api/v3/klines?symbol=${symbol}USDT&interval=1h&limit=24`);
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                const data = await response.json();
                
                if (!Array.isArray(data)) {
                    throw new Error('Invalid data format received');
                }
                
                // Преобразуем данные в нужный формат
                return data.map(candle => {
                    const [timestamp, , , , closePrice] = candle;
                    const randomFactor = 0.99 + Math.random() * 0.02; // ±1%
                    return [timestamp, parseFloat(closePrice) * randomFactor];
                });
            } catch (error) {
                console.error(`Error fetching historical data for ${symbol}:`, error);
                // В случае ошибки возвращаем демо-данные
                return Array(24).fill(0).map((_, i) => {
                    const date = new Date();
                    date.setHours(date.getHours() - i);
                    const basePrice = symbol === 'BTC' ? 45000 : 2500;
                    const randomFactor = 0.98 + Math.random() * 0.04;
                    return [date.getTime(), (basePrice - (i * (basePrice * 0.002))) * randomFactor];
                }).reverse();
            }
        }

        // Инициализация графиков
        async function initializeCharts() {
            try {
                // Создаем графики
                const btcCtx = document.getElementById('btcChart').getContext('2d');
                const ethCtx = document.getElementById('ethChart').getContext('2d');

                btcChart = new Chart(btcCtx, getChartConfig('#2196f3'));
                ethChart = new Chart(ethCtx, getChartConfig('#00bcd4'));

                // Получаем исторические данные
                const [btcHistory, ethHistory] = await Promise.all([
                    getHistoricalData('BTC'),
                    getHistoricalData('ETH')
                ]);

                // Обрабатываем данные
                if (btcHistory.length > 0) {
                    const btcData = processChartData(btcHistory);
                    updateChartData(btcChart, btcData);
                }

                if (ethHistory.length > 0) {
                    const ethData = processChartData(ethHistory);
                    updateChartData(ethChart, ethData);
                }

                // Запускаем обновление цен
                await updatePrices();
                setInterval(updatePrices, 300000); // Обновление каждые 5 минут
            } catch (error) {
                console.error('Error initializing charts:', error);
            }
        }

        // Обработка данных для графика
        function processChartData(data) {
            // Берем последние 24 точки (каждый час за последние сутки)
            const points = data.slice(-24);
            return {
                labels: points.map(item => new Date(item[0]).toLocaleTimeString()),
                prices: points.map(item => item[1])
            };
        }

        // Обновление данных графика
        function updateChartData(chart, data) {
            chart.data.labels = data.labels;
            chart.data.datasets[0].data = data.prices;
            chart.update();
        }

        // Обновление цен
        async function updatePrices() {
            try {
                const [btcResponse, ethResponse] = await Promise.all([
                    fetch('https://api.binance.com/api/v3/ticker/24hr?symbol=BTCUSDT'),
                    fetch('https://api.binance.com/api/v3/ticker/24hr?symbol=ETHUSDT')
                ]);

                if (!btcResponse.ok || !ethResponse.ok) throw new Error('Network response was not ok');
                
                const btcData = await btcResponse.json();
                const ethData = await ethResponse.json();

                // Обновляем цены и изменения с анимацией
                animateValue('btc-price', parseFloat(btcData.lastPrice));
                animateValue('eth-price', parseFloat(ethData.lastPrice));

                const btcChangeEl = document.getElementById('btc-change');
                const ethChangeEl = document.getElementById('eth-change');

                const btcChange = parseFloat(btcData.priceChangePercent);
                const ethChange = parseFloat(ethData.priceChangePercent);

                updatePriceChange(btcChangeEl, btcChange);
                updatePriceChange(ethChangeEl, ethChange);

                // Обновляем графики
                if (btcChart && ethChart) {
                    const currentTime = new Date().toLocaleTimeString();
                    
                    btcChart.data.labels.push(currentTime);
                    btcChart.data.datasets[0].data.push(parseFloat(btcData.lastPrice));
                    ethChart.data.labels.push(currentTime);
                    ethChart.data.datasets[0].data.push(parseFloat(ethData.lastPrice));

                    if (btcChart.data.labels.length > 24) {
                        btcChart.data.labels.shift();
                        btcChart.data.datasets[0].data.shift();
                    }
                    if (ethChart.data.labels.length > 24) {
                        ethChart.data.labels.shift();
                        ethChart.data.datasets[0].data.shift();
                    }

                    btcChart.update('none');
                    ethChart.update('none');
                }
            } catch (error) {
                console.error('Error updating prices:', error);
                // В случае ошибки показываем последние известные цены
                document.getElementById('btc-price').textContent = 'Ошибка загрузки';
                document.getElementById('eth-price').textContent = 'Ошибка загрузки';
            }
        }

        // Функция для анимации изменения цены
        function animateValue(elementId, newValue) {
            const element = document.getElementById(elementId);
            const currentValue = parseFloat(element.textContent.replace(/[^0-9.-]+/g, '')) || 0;
            const duration = 1000;
            const steps = 60;
            const increment = (newValue - currentValue) / steps;
            let step = 0;

            const animate = () => {
                step++;
                const value = currentValue + (increment * step);
                element.textContent = `$${value.toLocaleString(undefined, {
                    minimumFractionDigits: 2,
                    maximumFractionDigits: 2
                })}`;

                if (step < steps) {
                    requestAnimationFrame(animate);
                }
            };

            requestAnimationFrame(animate);
        }

        // Функция для обновления изменения цены
        function updatePriceChange(element, change) {
            const formattedChange = change.toFixed(2);
            element.textContent = `Изменение за 24ч: ${change >= 0 ? '+' : ''}${formattedChange}%`;
            element.style.color = change >= 0 ? '#4caf50' : '#f44336';
        }

        // Инициализация после загрузки DOM
        document.addEventListener('DOMContentLoaded', () => {
            initializeCharts();
            updateBalances();
        });

        // Функция для обновления балансов
        function updateBalances() {
            // Суммируем балансы со всех подключенных кошельков
            let totalBtc = 0;
            let totalEth = 0;

            const walletBalances = {
                metamask: {
                    btc: 0.05000000,
                    eth: 1.20000000
                },
                tonkeeper: {
                    btc: 0.03000000,
                    eth: 0.80000000
                }
            };

            Object.values(walletBalances).forEach(wallet => {
                totalBtc += wallet.btc;
                totalEth += wallet.eth;
            });

            // Обновляем отображение
            document.getElementById('btc-balance').textContent = `Баланс: ${totalBtc.toFixed(8)} BTC`;
            document.getElementById('eth-balance').textContent = `Баланс: ${totalEth.toFixed(8)} ETH`;
        }

        // Добавляем навигацию между секциями
        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const sectionId = link.getAttribute('data-section');
                
                // Обновляем активный класс в навигации
                document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
                link.classList.add('active');
                
                // Показываем нужную секцию
                document.querySelectorAll('.section').forEach(section => section.classList.remove('active'));
                document.getElementById(sectionId).classList.add('active');
                
                // Плавная прокрутка наверх
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            });
        });

        // Добавляем обработчик формы перевода
        document.getElementById('transfer-form').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const sourceWallet = document.getElementById('source-wallet').value;
            const crypto = document.getElementById('crypto-select').value;
            const amount = parseFloat(document.getElementById('amount').value);
            
            // Проверяем максимальную сумму
            const maxAmount = crypto === 'btc' ? 100 : 1000; // 100 BTC или 1000 ETH
            
            if (amount > maxAmount) {
                alert(`Максимальная сумма для перевода: ${maxAmount} ${crypto.toUpperCase()}`);
                return;
            }
            
            // Здесь будет логика перевода
            alert(`Перевод ${amount} ${crypto.toUpperCase()} с кошелька ${sourceWallet} успешно выполнен!`);
            this.reset();
        });

        // Обновляем отображение баланса при выборе кошелька и криптовалюты
        document.getElementById('source-wallet').addEventListener('change', updateTransferBalance);
        document.getElementById('crypto-select').addEventListener('change', updateTransferBalance);

        function updateTransferBalance() {
            const wallet = document.getElementById('source-wallet').value;
            const crypto = document.getElementById('crypto-select').value;
            const balanceDisplay = document.getElementById('balance-display');
            
            if (wallet && crypto) {
                const walletBalances = {
                    metamask: {
                        btc: 0.05000000,
                        eth: 1.20000000
                    },
                    tonkeeper: {
                        btc: 0.03000000,
                        eth: 0.80000000
                    }
                };
                
                const balance = walletBalances[wallet][crypto];
                balanceDisplay.textContent = `Доступный баланс: ${balance.toFixed(8)} ${crypto.toUpperCase()}`;
                balanceDisplay.classList.add('visible');
            }
        }

        // Вызываем обновление баланса при загрузке страницы
        document.addEventListener('DOMContentLoaded', () => {
            updateTransferBalance();
        });
    </script>
</body>
</html>


